doctype html
html ng-app="app"
  head
    meta charset="utf-8"
    title Vitos
    meta name="viewport" content="width=device-width, initial-scale=1"
    script type="text/javascript" src=asset_path("layout.js")
    script type="text/javascript" src="/js/jquery-1.8.3.js"
    script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.23/angular.min.js" 
    script type="text/javascript" src="/js/lodash.js"
    script type="text/javascript" src="/js/ng-route.js"
    script type="text/javascript" src="/js/ui-router.js"
    script type="text/javascript" src="/js/restangular.js"
    script type="text/javascript" src="/app/js/app.js"
    link rel="stylesheet" type="text/css" href="/css/bootstrap.min.css"
    link rel="stylesheet" type="text/css" href="/css/custom-theme.css"
    link rel="stylesheet" type="text/css" href="/app/css/app.css"
  body
    #wrap
      .container
        img#logo src="/img/vitoslogo.png"
        div(style="margin-top:20px;position:absolute;right:0;")
          - if !current_user.blank?
            span Hi 
            span = current_user[:FirstName]+" "+current_user[:LastName]
            - address = current_user.address
            - store = address.store
            / a change delivery address
            / @TODO: Allow editing of delivery address (requires same address normalization via USPS as signup) [github.com/tandpco/VitosWeb2/issues/5]
            / @TODO: When switching to delivery, make sure to revert the store to the deliverable store even if the user has modified prev. [github.com/tandpco/VitosWeb2/issues/6]
            / @TODO: Apply promo code needs to be debugged. [github.com/tandpco/VitosWeb2/issues/7]
            / |  | 
            - if session[:deliveryMethod].blank? or session[:deliveryMethod] === 1
              strong  &mdash; we'll deliver your order to <u>#{address[:AddressLine1]} #{address[:AddressLine2]} &bull; #{address[:City]}</u> 
              a(href="/order/switch-method?deliveryMethod=2") switch to pickup
            - else
              strong  &mdash; you're picking up from <u>#{store.Address1} &bull; #{{store.Address2}} &bull; #{store.City}</u> 
              a(href="/order/switch-method?deliveryMethod=1") switch to delivery
            |  | 
            a(href="/logout") logout
      #header
        #nav-container.nav-container
          nav.navbar-default.main-navbar role="navigation"
            .container
              .navbar-header
                button#collapse-button.navbar-toggle type="button" data-toggle="collapse" data-target=".navbar-collapse"
                  span.sr-only Toggle navigation
                  span.icon-bar
                  span.icon-bar
                  span.icon-bar
              .collapse.navbar-collapse: ul.nav.navbar-nav.navbar-right
                li: a.white-shadow.active href="/order?UnitID=1" MENU
                li: a.white-shadow href="/deals" DEALS
                li: a.white-shadow href="/locations" LOCATIONS
          nav.navbar-default.sub-navbar role="navigation"
            .container: .collapse.navbar-collapse: ul.nav.navbar-nav.navbar-right
              li: a.white-no-shadow href="/order?UnitID=1" class=(params[:UnitID] == '1' ? 'active' : '') PIZZAS
              li: a.white-no-shadow href="/order?UnitID=32" class=(params[:UnitID] == '32' ? 'active' : '') SUBS
              li: a.white-no-shadow href="/order?UnitID=3" class=(params[:UnitID] == '3' ? 'active' : '') SALADS
              li: a.white-no-shadow href="/order?UnitID=14" class=(params[:UnitID] == '14' ? 'active' : '') PARTY SALADS
              li: a.white-no-shadow href="/order" class=(params[:UnitID].blank? ? 'active' : '') SIDES
      #main.container == yield
    #footer
    script(type="text/javascript" src="//use.typekit.net/fyw7slw.js")
